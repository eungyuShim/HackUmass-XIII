<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <title>Grade Planner — My Courses</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="../css/global.css"/>
  <link rel="stylesheet" href="../css/course.css"/>
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <h1>Grade<br>Planner</h1>
        <p>Academic planning made easy</p>
      </div>
      <nav>
        <ul class="nav-list">
          <li class="nav-item">
            <a href="course.html" class="nav-link active">My Courses</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">Dashboard</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">Settings</a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <h2>My Courses</h2>
        <div class="header-subtitle">Select a course to get started</div>
        <div class="pill" id="tok">Checking token...</div>
      </header>

      <section class="grid" id="list"></section>
    </main>
  </div>

  <script>
    const has = sessionStorage.getItem('canvas_token_present') === '1';
    document.getElementById('tok').textContent = has ? '✓ Token detected' : 'Demo mode (no token)';
    
    const courses = [
      {id: 'C-160', name: 'MICROBIO 160', term: 'Fall 2025'},
      {id: 'C-514', name: 'CS 514 — Algorithms', term: 'Fall 2025'}
    ];
    
    const root = document.getElementById('list');
    courses.forEach(c => {
      const el = document.createElement('div');
      el.className = 'card';
      el.innerHTML = `
        <h3>${c.name}</h3>
        <div class="card-term">${c.term}</div>
        <div class="card-pill">Course ID: ${c.id}</div>
        <div class="row">
          <button class="btn btn--primary" data-id="${c.id}" data-name="${c.name}">View Course</button>
        </div>
      `;
      root.appendChild(el);
    });
    
    root.addEventListener('click', e => {
      const b = e.target.closest('button');
      if (!b) return;
      sessionStorage.setItem('current_course_id', b.dataset.id);
      sessionStorage.setItem('current_course_name', b.dataset.name);
      // 나중에 dashboard.html로 연결
      alert(`Opening ${b.dataset.name}`);
    });
  </script>
</body>
</html>
